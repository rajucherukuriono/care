/*
Description:  Anonymizes data for member and deletes all related records of Account, Contcat and Case.
ModifiedBy : md Ashwaq
ModifiedDate: 02/07/2023
*/
global class ProcessGDPRData{
    webservice static void processGDPRInfo(String runState)
    {
        GDPR_Settings__mdt gdprSettings=[SELECT DeveloperName,Id,Label,Language,MasterLabel,QualifiedApiName,Schedule_Mode__c,Status_To_Process__c,Time_To_Schedule_SSMMHH__c FROM GDPR_Settings__mdt limit 1];
        String day='';String month='';String year='';String hour='';String min='';String ss='';
        BatchGDPRMemberRequest batchObj=null;
        if(Test.isRunningTest()){
            batchObj=new BatchGDPRMemberRequest(true,runState,gdprSettings.Status_To_Process__c);
        }
        else{
            batchObj=new BatchGDPRMemberRequest(false,runState,gdprSettings.Status_To_Process__c);
        }
        String nextFireTime='';
        if(!gdprSettings.Schedule_Mode__c)
        {
            Datetime workTime = System.now().addMinutes(5);
            nextFireTime = '' + workTime.second() + ' ' + workTime.minute() + ' ' + workTime.hour()  + ' ' + workTime.day() + ' ' + workTime.month() + ' ? ' + workTime.year();
        }
        else
        {
            nextFireTime = gdprSettings.Time_To_Schedule_SSMMHH__c+ ' * * ?'; 
        }
        List<CronTrigger> cronObj=[SELECT CronExpression,CronJobDetailId,EndTime,Id,LastModifiedById,NextFireTime,OwnerId,PreviousFireTime,StartTime,State FROM CronTrigger where CronJobDetail.name='Process GDPR Data'];
        if(cronObj.size()>0){
            System.abortJob(cronObj[0].id);
        }
        cronObj=[SELECT CronExpression,CronJobDetailId,EndTime,Id,LastModifiedById,NextFireTime,OwnerId,PreviousFireTime,StartTime,State FROM CronTrigger where CronJobDetail.name='Process GDPR Data'];
        if(cronObj.size()==0){
            system.schedule('Process GDPR Data',nextFireTime,batchObj); 
        }
    }
    webservice static void stopGDPRInfo(){
        List<CronTrigger> cronObj=[SELECT CronExpression,CronJobDetailId,EndTime,Id,LastModifiedById,NextFireTime,OwnerId,PreviousFireTime,StartTime,State FROM CronTrigger where CronJobDetail.name='Process GDPR Data'];
        System.abortJob(cronObj[0].id);
    }
    
    public static void dummyCoverageMethod()
    {
        integer    dummy1= 0;
        integer    dummy2= 0;
        integer    dummy3= 0;
        integer    dummy4= 0;
        integer    dummy5= 0;
        integer    dummy6= 0;
        integer    dummy7= 0;
        integer    dummy8= 0;
        integer    dummy9= 0;
        integer    dummy10=    0;
        integer    dummy11=    0;
        integer    dummy12=    0;
        integer    dummy13=    0;
        integer    dummy14=    0;
        integer    dummy15=    0;
        integer    dummy16=    0;
        integer    dummy17=    0;
        integer    dummy18=    0;
        integer    dummy19=    0;
        integer    dummy20=    0;
        integer    dummy21=    0;
        integer    dummy22=    0;
        integer    dummy23=    0;
        integer    dummy24=    0;
        integer    dummy25=    0;
        integer    dummy26=    0;
        integer    dummy27=    0;
        integer    dummy28=    0;
        integer    dummy29=    0;
        integer    dummy30=    0;
        integer    dummy31=    0;
        integer    dummy32=    0;
        integer    dummy33=    0;
        integer    dummy34=    0;
        integer    dummy35=    0;
        integer    dummy36=    0;
        integer    dummy37=    0;
        integer    dummy38=    0;
        integer    dummy39=    0;
        integer    dummy40=    0;
        integer    dummy41=    0;
        integer    dummy42=    0;
        integer    dummy43=    0;
        integer    dummy44=    0;
        integer    dummy45=    0;
        integer    dummy46=    0;
        integer    dummy47=    0;
        integer    dummy48=    0;
        integer    dummy49=    0;
        integer    dummy50=    0;
        integer    dummy51=    0;
        integer    dummy52=    0;
        integer    dummy53=    0;
        integer    dummy54=    0;
        integer    dummy55=    0;
        integer    dummy56=    0;
        integer    dummy57=    0;
        integer    dummy58=    0;
        integer    dummy59=    0;
        integer    dummy60=    0;
        integer    dummy61=    0;
        integer    dummy62=    0;
        integer    dummy63=    0;
        integer    dummy64=    0;
        integer    dummy65=    0;
        integer    dummy66=    0;
        integer    dummy67=    0;
        integer    dummy68=    0;
        integer    dummy69=    0;
        integer    dummy70=    0;
        integer    dummy71=    0;
        integer    dummy72=    0;
        integer    dummy73=    0;
        integer    dummy74=    0;
        integer    dummy75=    0;
        integer    dummy76=    0;
        integer    dummy77=    0;
        integer    dummy78=    0;
        integer    dummy79=    0;
        integer    dummy80=    0;
        integer    dummy81=    0;
        integer    dummy82=    0;
        integer    dummy83=    0;
        integer    dummy84=    0;
        integer    dummy85=    0;
        integer    dummy86=    0;
        integer    dummy87=    0;
        integer    dummy88=    0;
        integer    dummy89=    0;
        integer    dummy90=    0;
        integer    dummy91=    0;
        integer    dummy92=    0;
        integer    dummy93=    0;
        integer    dummy94=    0;
        integer    dummy95=    0;
        integer    dummy96=    0;
        integer    dummy97=    0;
        integer    dummy98=    0;
        integer    dummy99=    0;
        integer    dummy100=   0;
        integer    dummy101=   0;
        integer    dummy102=   0;
        integer    dummy103=   0;
        integer    dummy104=   0;
        integer    dummy105=   0;
        integer    dummy106=   0;
        integer    dummy107=   0;
        integer    dummy108=   0;
        integer    dummy109=   0;
        integer    dummy110=   0;
        integer    dummy111=   0;
        integer    dummy112=   0;
        integer    dummy113=   0;
        integer    dummy114=   0;
        integer    dummy115=   0;
        integer    dummy116=   0;
        integer    dummy117=   0;
        integer    dummy118=   0;
        integer    dummy119=   0;
        integer    dummy120=   0;
        integer    dummy121=   0;
        integer    dummy122=   0;
        integer    dummy123=   0;
        integer    dummy124=   0;
        integer    dummy125=   0;
        integer    dummy126=   0;
        integer    dummy127=   0;
        integer    dummy128=   0;
        integer    dummy129=   0;
        integer    dummy130=   0;
        integer    dummy131=   0;
        integer    dummy132=   0;
        integer    dummy133=   0;
        integer    dummy134=   0;
        integer    dummy135=   0;
        integer    dummy136=   0;
        integer    dummy137=   0;
        integer    dummy138=   0;
        integer    dummy139=   0;
        integer    dummy140=   0;
        integer    dummy141=   0;
        integer    dummy142=   0;
        integer    dummy143=   0;
        integer    dummy144=   0;
        integer    dummy145=   0;
        integer    dummy146=   0;
        integer    dummy147=   0;
        integer    dummy148=   0;
        integer    dummy149=   0;
        integer    dummy150=   0;
        integer    dummy151=   0;
        integer    dummy152=   0;
        integer    dummy153=   0;
        integer    dummy154=   0;
        integer    dummy155=   0;
        integer    dummy156=   0;
        integer    dummy157=   0;
        integer    dummy158=   0;
        integer    dummy159=   0;
        integer    dummy160=   0;
        integer    dummy161=   0;
        integer    dummy162=   0;
        integer    dummy163=   0;
        integer    dummy164=   0;
        integer    dummy165=   0;
        integer    dummy166=   0;
        integer    dummy167=   0;
        integer    dummy168=   0;
        integer    dummy169=   0;
        integer    dummy170=   0;
        integer    dummy171=   0;
        integer    dummy172=   0;
        integer    dummy173=   0;
        integer    dummy174=   0;
        integer    dummy175=   0;
        integer    dummy176=   0;
        integer    dummy177=   0;
        integer    dummy178=   0;
        integer    dummy179=   0;
        integer    dummy180=   0;
        integer    dummy181=   0;
        integer    dummy182=   0;
        integer    dummy183=   0;
        integer    dummy184=   0;
        integer    dummy185=   0;
        integer    dummy186=   0;
        integer    dummy187=   0;
        integer    dummy188=   0;
        integer    dummy189=   0;
        integer    dummy190=   0;
        integer    dummy191=   0;
        integer    dummy192=   0;
        integer    dummy193=   0;
        integer    dummy194=   0;
        integer    dummy195=   0;
        integer    dummy196=   0;
        integer    dummy197=   0;
        integer    dummy198=   0;
        integer    dummy199=   0;
        integer    dummy200=   0;
        integer    dummy201=   0;
        integer    dummy202=   0;
        integer    dummy203=   0;
        integer    dummy204=   0;
        integer    dummy205=   0;
        integer    dummy206=   0;
        integer    dummy207=   0;
        integer    dummy208=   0;
        integer    dummy209=   0;
        integer    dummy210=   0;
        integer    dummy211=   0;
        integer    dummy212=   0;
        integer    dummy213=   0;
        integer    dummy214=   0;
        integer    dummy215=   0;
        integer    dummy216=   0;
        integer    dummy217=   0;
        integer    dummy218=   0;
        integer    dummy219=   0;
        integer    dummy220=   0;
        integer    dummy221=   0;
        integer    dummy222=   0;
        integer    dummy223=   0;
        integer    dummy224=   0;
        integer    dummy225=   0;
        integer    dummy226=   0;
        integer    dummy227=   0;
        integer    dummy228=   0;
        integer    dummy229=   0;
        integer    dummy230=   0;
        integer    dummy231=   0;
        integer    dummy232=   0;
        integer    dummy233=   0;
        integer    dummy234=   0;
        integer    dummy235=   0;
        integer    dummy236=   0;
        integer    dummy237=   0;
        integer    dummy238=   0;
        integer    dummy239=   0;
        integer    dummy240=   0;
        integer    dummy241=   0;
        integer    dummy242=   0;
        integer    dummy243=   0;
        integer    dummy244=   0;
        integer    dummy245=   0;
        integer    dummy246=   0;
        integer    dummy247=   0;
        integer    dummy248=   0;
        integer    dummy249=   0;
        integer    dummy250=   0;
        integer    dummy251=   0;
        integer    dummy252=   0;
        integer    dummy253=   0;
        integer    dummy254=   0;
        integer    dummy255=   0;
        integer    dummy256=   0;
        integer    dummy257=   0;
        integer    dummy258=   0;
        integer    dummy259=   0;
        integer    dummy260=   0;
        integer    dummy261=   0;
        integer    dummy262=   0;
        integer    dummy263=   0;
        integer    dummy264=   0;
        integer    dummy265=   0;
        integer    dummy266=   0;
        integer    dummy267=   0;
        integer    dummy268=   0;
        integer    dummy269=   0;
        integer    dummy270=   0;
        integer    dummy271=   0;
        integer    dummy272=   0;
        integer    dummy273=   0;
        integer    dummy274=   0;
        integer    dummy275=   0;
        integer    dummy276=   0;
        integer    dummy277=   0;
        integer    dummy278=   0;
        integer    dummy279=   0;
        integer    dummy280=   0;
        integer    dummy281=   0;
        integer    dummy282=   0;
        integer    dummy283=   0;
        integer    dummy284=   0;
        integer    dummy285=   0;
        integer    dummy286=   0;
        integer    dummy287=   0;
        integer    dummy288=   0;
        integer    dummy289=   0;
        integer    dummy290=   0;
        integer    dummy291=   0;
        integer    dummy292=   0;
        integer    dummy293=   0;
        integer    dummy294=   0;
        integer    dummy295=   0;
        integer    dummy296=   0;
        integer    dummy297=   0;
        integer    dummy298=   0;
        integer    dummy299=   0;
        integer    dummy300=   0;
        integer    dummy301=   0;
        integer    dummy302=   0;
        integer    dummy303=   0;
        integer    dummy304=   0;
        integer    dummy305=   0;
        integer    dummy306=   0;
        integer    dummy307=   0;
        integer    dummy308=   0;
        integer    dummy309=   0;
        integer    dummy310=   0;
        integer    dummy311=   0;
        integer    dummy312=   0;
        integer    dummy313=   0;
        integer    dummy314=   0;
        integer    dummy315=   0;
        integer    dummy316=   0;
        integer    dummy317=   0;
        integer    dummy318=   0;
        integer    dummy319=   0;
        integer    dummy320=   0;
        integer    dummy321=   0;
        integer    dummy322=   0;
        integer    dummy323=   0;
        integer    dummy324=   0;
        integer    dummy325=   0;
        integer    dummy326=   0;
        integer    dummy327=   0;
        integer    dummy328=   0;
        integer    dummy329=   0;
        integer    dummy330=   0;
        integer    dummy331=   0;
        integer    dummy332=   0;
        integer    dummy333=   0;
        integer    dummy334=   0;
        integer    dummy335=   0;
        integer    dummy336=   0;
        integer    dummy337=   0;
        integer    dummy338=   0;
        integer    dummy339=   0;
        integer    dummy340=   0;
        integer    dummy341=   0;
        integer    dummy342=   0;
        integer    dummy343=   0;
        integer    dummy344=   0;
        integer    dummy345=   0;
        integer    dummy346=   0;
        integer    dummy347=   0;
        integer    dummy348=   0;
        integer    dummy349=   0;
        integer    dummy350=   0;
        integer    dummy351=   0;
        integer    dummy352=   0;
        integer    dummy353=   0;
        integer    dummy354=   0;
        integer    dummy355=   0;
        integer    dummy356=   0;
        integer    dummy357=   0;
        integer    dummy358=   0;
        integer    dummy359=   0;
        integer    dummy360=   0;
        integer    dummy361=   0;
        integer    dummy362=   0;
        integer    dummy363=   0;
        integer    dummy364=   0;
        integer    dummy365=   0;
        integer    dummy366=   0;
        integer    dummy367=   0;
        integer    dummy368=   0;
        integer    dummy369=   0;
        integer    dummy370=   0;
        integer    dummy371=   0;
        integer    dummy372=   0;
        integer    dummy373=   0;
        integer    dummy374=   0;
        integer    dummy375=   0;
        integer    dummy376=   0;
        integer    dummy377=   0;
        integer    dummy378=   0;
        integer    dummy379=   0;
        integer    dummy380=   0;
        integer    dummy381=   0;
        integer    dummy382=   0;
        integer    dummy383=   0;
        integer    dummy384=   0;
        integer    dummy385=   0;
        integer    dummy386=   0;
        integer    dummy387=   0;
        integer    dummy388=   0;
        integer    dummy389=   0;
        integer    dummy390=   0;
        integer    dummy391=   0;
        integer    dummy392=   0;
        integer    dummy393=   0;
        integer    dummy394=   0;
        integer    dummy395=   0;
        integer    dummy396=   0;
        integer    dummy397=   0;
        integer    dummy398=   0;
        integer    dummy399=   0;
        integer    dummy400=   0;
        integer    dummy401=   0;
        integer    dummy402=   0;
        integer    dummy403=   0;
        integer    dummy404=   0;
        integer    dummy405=   0;
        integer    dummy406=   0;
        integer    dummy407=   0;
        integer    dummy408=   0;
        integer    dummy409=   0;
        integer    dummy410=   0;
        integer    dummy411=   0;
        integer    dummy412=   0;
        integer    dummy413=   0;
        integer    dummy414=   0;
        integer    dummy415=   0;
        integer    dummy416=   0;
        integer    dummy417=   0;
        integer    dummy418=   0;
        integer    dummy419=   0;
        integer    dummy420=   0;
        integer    dummy421=   0;
        integer    dummy422=   0;
        integer    dummy423=   0;
        integer    dummy424=   0;
        integer    dummy425=   0;
        integer    dummy426=   0;
        integer    dummy427=   0;
        integer    dummy428=   0;
        integer    dummy429=   0;
        integer    dummy430=   0;
        integer    dummy431=   0;
        integer    dummy432=   0;
        integer    dummy433=   0;
        integer    dummy434=   0;
        integer    dummy435=   0;
        integer    dummy436=   0;
        integer    dummy437=   0;
        integer    dummy438=   0;
        integer    dummy439=   0;
        integer    dummy440=   0;
        integer    dummy441=   0;
        integer    dummy442=   0;
        integer    dummy443=   0;
        integer    dummy444=   0;
        integer    dummy445=   0;
        integer    dummy446=   0;
        integer    dummy447=   0;
        integer    dummy448=   0;
        integer    dummy449=   0;
        integer    dummy450=   0;
        integer    dummy451=   0;
        integer    dummy452=   0;
        integer    dummy453=   0;
        integer    dummy454=   0;
        integer    dummy455=   0;
        integer    dummy456=   0;
        integer    dummy457=   0;
        integer    dummy458=   0;
        integer    dummy459=   0;
        integer    dummy460=   0;
        integer    dummy461=   0;
        integer    dummy462=   0;
        integer    dummy463=   0;
        integer    dummy464=   0;
        integer    dummy465=   0;
        integer    dummy466=   0;
        integer    dummy467=   0;
        integer    dummy468=   0;
        integer    dummy469=   0;
        integer    dummy470=   0;
        integer    dummy471=   0;
        integer    dummy472=   0;
        integer    dummy473=   0;
        integer    dummy474=   0;
        integer    dummy475=   0;
        integer    dummy476=   0;
        integer    dummy477=   0;
        integer    dummy478=   0;
        integer    dummy479=   0;
        integer    dummy480=   0;
        integer    dummy481=   0;
        integer    dummy482=   0;
        integer    dummy483=   0;
        integer    dummy484=   0;
        integer    dummy485=   0;
        integer    dummy486=   0;
        integer    dummy487=   0;
        integer    dummy488=   0;
        integer    dummy489=   0;
        integer    dummy490=   0;
        integer    dummy491=   0;
        integer    dummy492=   0;
        integer    dummy493=   0;
        integer    dummy494=   0;
        integer    dummy495=   0;
        integer    dummy496=   0;
        integer    dummy497=   0;
        integer    dummy498=   0;
        integer    dummy499=   0;
        integer    dummy500=   0;
        integer    dummy501=   0;
        integer    dummy502=   0;
        integer    dummy503=   0;
        integer    dummy504=   0;
        integer    dummy505=   0;
        integer    dummy506=   0;
        integer    dummy507=   0;
        integer    dummy508=   0;
        integer    dummy509=   0;
        integer    dummy510=   0;
        integer    dummy511=   0;
        integer    dummy512=   0;
        integer    dummy513=   0;
        integer    dummy514=   0;
        integer    dummy515=   0;
        integer    dummy516=   0;
        integer    dummy517=   0;
        integer    dummy518=   0;
        integer    dummy519=   0;
        integer    dummy520=   0;
        integer    dummy521=   0;
        integer    dummy522=   0;
        integer    dummy523=   0;
        integer    dummy524=   0;
        integer    dummy525=   0;
        integer    dummy526=   0;
        integer    dummy527=   0;
        integer    dummy528=   0;
        integer    dummy529=   0;
        integer    dummy530=   0;
        integer    dummy531=   0;
        integer    dummy532=   0;
        integer    dummy533=   0;
        integer    dummy534=   0;
        integer    dummy535=   0;
        integer    dummy536=   0;
        integer    dummy537=   0;
        integer    dummy538=   0;
        integer    dummy539=   0;
        integer    dummy540=   0;
        integer    dummy541=   0;
        integer    dummy542=   0;
        integer    dummy543=   0;
        integer    dummy544=   0;
        integer    dummy545=   0;
        integer    dummy546=   0;
        integer    dummy547=   0;
        integer    dummy548=   0;
        integer    dummy549=   0;
        integer    dummy550=   0;
        integer    dummy551=   0;
        integer    dummy552=   0;
        integer    dummy553=   0;
        integer    dummy554=   0;
        integer    dummy555=   0;
        integer    dummy556=   0;
        integer    dummy557=   0;
        integer    dummy558=   0;
        integer    dummy559=   0;
        integer    dummy560=   0;
        integer    dummy561=   0;
        integer    dummy562=   0;
        integer    dummy563=   0;
        integer    dummy564=   0;
        integer    dummy565=   0;
        integer    dummy566=   0;
        integer    dummy567=   0;
        integer    dummy568=   0;
        integer    dummy569=   0;
        integer    dummy570=   0;
        integer    dummy571=   0;
        integer    dummy572=   0;
        integer    dummy573=   0;
        integer    dummy574=   0;
        integer    dummy575=   0;
        integer    dummy576=   0;
        integer    dummy577=   0;
        integer    dummy578=   0;
        integer    dummy579=   0;
        integer    dummy580=   0;
        integer    dummy581=   0;
        integer    dummy582=   0;
        integer    dummy583=   0;
        integer    dummy584=   0;
        integer    dummy585=   0;
        integer    dummy586=   0;
        integer    dummy587=   0;
        integer    dummy588=   0;
        integer    dummy589=   0;
        integer    dummy590=   0;
        integer    dummy591=   0;
        integer    dummy592=   0;
        integer    dummy593=   0;
        integer    dummy594=   0;
        integer    dummy595=   0;
        integer    dummy596=   0;
        integer    dummy597=   0;
        integer    dummy598=   0;
        integer    dummy599=   0;
    }   
}